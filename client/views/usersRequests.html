<div id="usersContainer" ng-controller="usersCtrl">
    <button onclick="window.history.back();" type="button" class="btn btn-link btn-back">
        <i class="fa fa-angle-left fa-fw"></i> {{ trans('back') }}
    </button>
    <br>
    <br>

    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    {{ trans(title) }} {{ userId }}
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="dataTable_wrapper">
                        <table class="table table-striped table-bordered table-hover" id="dataTables-requests">
                            <thead>
                                <tr>
                                    <th>{{ trans('request_id') }}</th>
                                    <th>{{ trans('req_time') }}</th>
                                    <th>{{ trans('req_processing') }}</th>
                                    <th>{{ trans('num_errors') }}</th>
                                    <th>{{ trans('actions') }}</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th>request_id</th>
                                    <th>req_time</th>
                                    <th>req_processing</th>
                                    <th>num_errors</th>
                                    <th class="bottomRight">actions</th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->

    <script>
    $(document).ready(function() {
        $('#dataTables-requests tfoot th').each( function () {
            var title = $(this).text();
            if (title != 'actions') {
                $(this).html('<input type="search" class="form-control input-sm footer-search" placeholder="' + trans('filter_by') + ' \'' + trans(title) + '\'" />');
            }
        });

        var table = $('#dataTables-requests').DataTable({
            responsive: true,
            'language': {
                'lengthMenu': trans('lengthMenu'),
                'search': trans('search'),
                'zeroRecords': trans('zeroRecords'),
                'info': trans('info'),
                'infoEmpty': trans('infoEmpty'),
                'infoFiltered': trans('infoFiltered'),
                'processing': trans('processing'),
                'paginate': {
                    'first': trans('first'),
                    'last': trans('last'),
                    'next': trans('next'),
                    'previous': trans('previous')
                }
            },
            'processing': true,
            'serverSide': true,
            'ajax': 'test2.php',
            'columns': [
                { 'data': 'id' },
                { 'data': 'time' },
                { 'data': 'processing' },
                { 'data': 'numErrors' },
                { 'data': 'button' }
            ],
            'columnDefs': [
                {
                    'orderable': false,
                    'targets': -1,
                    'render': function (data, type, full, meta) {
                        return '<a href="' + config.baseUrl + '/requests/' + full.id + '" class="btn btn-primary">' + trans('details') + '</a>';
                    }
                }
            ]
        });

        table.columns().every(function() {
            var that = this;
            $('input', this.footer()).on('keydown', function (ev) {
                if (ev.keyCode == 13) {
                    that
                        .search(this.value)
                        .draw();
                }
            });
        });
    });
    </script>
</div>
